---
import MainLayout from '../../layouts/MainLayout.astro';
---

<MainLayout title="API Integration & Middleware Services">

  <style>
    /* Gradient Text */
    .text-gradient {
      background: linear-gradient(to right, #22c55e, #10b981);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .bg-grid {
      background-size: 40px 40px;
      background-image: linear-gradient(to right, rgba(0, 0, 0, 0.05) 1px, transparent 1px),
                        linear-gradient(to bottom, rgba(0, 0, 0, 0.05) 1px, transparent 1px);
    }
    
    html { scroll-padding-top: 100px; }
  </style>

  <section class="pt-40 pb-20 px-6 bg-slate-950 bg-grid border-b border-slate-800">
    <div class="max-w-[1200px] mx-auto text-center relative z-10">
      
      <div class="inline-flex items-center gap-3 px-4 py-2 rounded-full bg-green-900/30 border border-green-800 text-green-400 text-[12px] font-bold uppercase tracking-widest mb-8 shadow-sm">
        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
        Daraja 2.0 ‚Ä¢ REST ‚Ä¢ SOAP ‚Ä¢ GraphQL
      </div>

      <h1 class="text-5xl md:text-7xl font-extrabold text-white mb-6 leading-[1.1] tracking-tight">
        We Connect <br />
        <span class="text-gradient">Your Systems.</span>
      </h1>
      
      <p class="text-xl text-slate-400 mb-10 leading-relaxed max-w-4xl mx-auto font-medium">
        Stop using manual file uploads. We build secure <strong>API Middleware</strong> to link your ERP, Website, or App directly to <strong>M-Pesa, Banks, CRB, and SMS Gateways</strong>.
      </p>

      <div class="flex flex-col sm:flex-row justify-center gap-4 mb-16">
        <a href="#mpesa" class="bg-green-600 text-white px-10 py-5 rounded-xl font-bold text-lg hover:bg-green-500 transition-all shadow-xl shadow-green-900/20">
          M-Pesa Integration
        </a>
        <a href="/contact" class="bg-slate-900 border-2 border-slate-700 text-white px-10 py-5 rounded-xl font-bold text-lg hover:border-green-500 transition-all shadow-sm">
          Request Docs
        </a>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto border-t border-slate-800 pt-10">
        <div><div class="font-bold text-white text-lg">99.9%</div><div class="text-xs text-slate-500 uppercase font-bold">Uptime</div></div>
        <div><div class="font-bold text-white text-lg">SSL/TLS</div><div class="text-xs text-slate-500 uppercase font-bold">Encrypted Data</div></div>
        <div><div class="font-bold text-white text-lg">Real-Time</div><div class="text-xs text-slate-500 uppercase font-bold">Webhooks</div></div>
        <div><div class="font-bold text-white text-lg">Logs</div><div class="text-xs text-slate-500 uppercase font-bold">Audit Trail</div></div>
      </div>
    </div>
  </section>

  <div class="sticky top-[72px] z-40 bg-white/95 backdrop-blur-md border-y border-slate-200 py-4 hidden md:block shadow-sm">
    <div class="max-w-[1400px] mx-auto px-6 flex justify-center gap-8 text-sm font-bold uppercase tracking-widest text-slate-500">
      <a href="#mpesa" class="hover:text-green-600 transition-colors">M-Pesa / Payments</a>
      <a href="#banking" class="hover:text-green-600 transition-colors">Core Banking</a>
      <a href="#sms" class="hover:text-green-600 transition-colors">SMS & Comms</a>
      <a href="#security" class="hover:text-green-600 transition-colors">Security</a>
    </div>
  </div>

  <section id="mpesa" class="py-24 px-6 bg-white border-b border-slate-100">
    <div class="max-w-[1200px] mx-auto grid lg:grid-cols-12 gap-16 items-center">
      <div class="lg:col-span-5">
        <div class="w-12 h-12 bg-green-100 text-green-600 rounded-xl flex items-center justify-center text-2xl mb-6">üí≥</div>
        <h2 class="text-3xl font-bold text-slate-900 mb-4">M-Pesa (Daraja) Experts</h2>
        <p class="text-slate-600 leading-relaxed mb-6 text-lg">
          We don't just "plug in" M-Pesa. We handle the edge cases: timeouts, insufficient funds, and callbacks.
        </p>
        
        <div class="space-y-6">
          <div class="flex gap-4">
             <div class="w-12 h-12 bg-white border border-slate-200 rounded-lg flex items-center justify-center text-xl flex-shrink-0 shadow-sm">üì≤</div>
             <div>
               <h4 class="font-bold text-slate-900 text-lg">C2B (STK Push)</h4>
               <p class="text-sm text-slate-500">Trigger a popup on the customer's phone. "Enter PIN to pay KES 500". Instant confirmation.</p>
             </div>
          </div>
          <div class="flex gap-4">
             <div class="w-12 h-12 bg-white border border-slate-200 rounded-lg flex items-center justify-center text-xl flex-shrink-0 shadow-sm">üí∏</div>
             <div>
               <h4 class="font-bold text-slate-900 text-lg">B2C (Disbursements)</h4>
               <p class="text-sm text-slate-500">Automate salary payouts, loan disbursements, or betting winnings directly to M-Pesa numbers.</p>
             </div>
          </div>
          <div class="flex gap-4">
             <div class="w-12 h-12 bg-white border border-slate-200 rounded-lg flex items-center justify-center text-xl flex-shrink-0 shadow-sm">üîÑ</div>
             <div>
               <h4 class="font-bold text-slate-900 text-lg">Reversal Handling</h4>
               <p class="text-sm text-slate-500">Automatically flag or reverse transactions in your system if M-Pesa sends a reversal notification.</p>
             </div>
          </div>
        </div>
      </div>

      <div class="lg:col-span-7">
        <div class="bg-slate-900 rounded-2xl shadow-2xl border border-slate-800 overflow-hidden">
           <div class="flex items-center gap-2 px-4 py-3 bg-slate-950 border-b border-slate-800">
              <div class="w-3 h-3 rounded-full bg-red-500"></div>
              <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
              <div class="w-3 h-3 rounded-full bg-green-500"></div>
              <div class="ml-4 text-xs font-mono text-slate-500">POST /mpesa/stk_push</div>
           </div>
           <div class="p-6 overflow-x-auto">
              <pre class="font-mono text-sm leading-relaxed text-slate-300">
<span class="text-purple-400">const</span> response = <span class="text-purple-400">await</span> daraja.<span class="text-blue-400">stkPush</span>&#123;
  <span class="text-sky-300">phoneNumber</span>: <span class="text-green-400">"254712345678"</span>,
  <span class="text-sky-300">amount</span>: <span class="text-orange-400">1000</span>,
  <span class="text-sky-300">accountReference</span>: <span class="text-green-400">"ORDER-921"</span>,
  <span class="text-sky-300">callbackUrl</span>: <span class="text-green-400">"https://api.talkintech.com/v1/ipn"</span>
&#125;;

<span class="text-slate-500">// Response from Safaricom</span>
<span class="text-yellow-400">if</span> (response.ResponseCode === <span class="text-green-400">"0"</span>) &#123;
  console.<span class="text-blue-400">log</span>(<span class="text-green-400">"Prompt sent to user phone!"</span>);
  <span class="text-slate-500">// Start polling for payment status...</span>
&#125;
              </pre>
           </div>
        </div>
      </div>
    </div>
  </section>

  <section id="banking" class="py-24 px-6 bg-slate-50 border-b border-slate-200">
    <div class="max-w-[1200px] mx-auto grid lg:grid-cols-2 gap-16 items-center">
      
      <div class="bg-white p-8 rounded-3xl border border-slate-200 shadow-xl relative">
         <div class="flex justify-between items-center gap-4">
            <div class="text-center">
               <div class="w-16 h-16 bg-slate-900 text-white rounded-xl flex items-center justify-center text-2xl mx-auto mb-2">üè¢</div>
               <div class="text-xs font-bold text-slate-900">Your ERP</div>
            </div>
            
            <div class="flex-1 flex flex-col items-center">
               <div class="text-[10px] bg-green-100 text-green-700 px-2 py-1 rounded mb-1 font-mono">ISO 8583 / REST</div>
               <div class="w-full h-1 bg-slate-200 relative">
                  <div class="absolute right-0 top-1/2 -translate-y-1/2 w-2 h-2 bg-slate-400 rounded-full"></div>
                  <div class="absolute left-0 top-1/2 -translate-y-1/2 w-2 h-2 bg-slate-400 rounded-full"></div>
                  <div class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-green-500 rounded-full animate-ping left-1/2"></div>
               </div>
            </div>

            <div class="text-center">
               <div class="w-16 h-16 bg-blue-600 text-white rounded-xl flex items-center justify-center text-2xl mx-auto mb-2">üè¶</div>
               <div class="text-xs font-bold text-slate-900">Co-op Bank</div>
            </div>
         </div>

         <div class="mt-8 bg-slate-50 p-4 rounded-xl border border-slate-100 text-xs font-mono text-slate-600">
            > Initiating Bulk Transfer...<br/>
            > Validating Accounts... OK<br/>
            > Checksum Verified... OK<br/>
            > <span class="text-green-600">Transaction Complete. Ref: FT290129</span>
         </div>
      </div>

      <div>
        <h2 class="text-3xl font-bold text-slate-900 mb-6">Banking & CRB Integrations</h2>
        <p class="text-slate-600 mb-8 text-lg">
          Direct Host-to-Host (H2H) connections or API Banking.
        </p>
        
        <div class="space-y-6">
          <div class="flex gap-4">
             <div class="w-12 h-12 bg-white border border-slate-200 rounded-lg flex items-center justify-center text-xl flex-shrink-0 shadow-sm">üè¶</div>
             <div>
               <h4 class="font-bold text-slate-900 text-lg">Corporate Banking API</h4>
               <p class="text-sm text-slate-600">Integrate with Co-op, Equity, KCB, or StanChart. Automate vendor payments directly from your SAP/ERP system.</p>
             </div>
          </div>
          <div class="flex gap-4">
             <div class="w-12 h-12 bg-white border border-slate-200 rounded-lg flex items-center justify-center text-xl flex-shrink-0 shadow-sm">üìã</div>
             <div>
               <h4 class="font-bold text-slate-900 text-lg">CRB Checking (Metropol/TransUnion)</h4>
               <p class="text-sm text-slate-600">Automatically check a borrower's credit score before approving a loan in your app. List defaulters automatically.</p>
             </div>
          </div>
          <div class="flex gap-4">
             <div class="w-12 h-12 bg-white border border-slate-200 rounded-lg flex items-center justify-center text-xl flex-shrink-0 shadow-sm">üÜî</div>
             <div>
               <h4 class="font-bold text-slate-900 text-lg">KYC & Identity</h4>
               <p class="text-sm text-slate-600">Verify National ID numbers and names (where authorized) to prevent fraud during onboarding.</p>
             </div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <section id="sms" class="py-24 px-6 bg-slate-900 text-white border-b border-slate-800">
    <div class="max-w-[1200px] mx-auto text-center mb-16">
      <h2 class="text-3xl font-bold text-white mb-4">Communications & Maps</h2>
      <p class="text-slate-400 text-lg">Essential utilities for modern apps.</p>
    </div>

    <div class="grid md:grid-cols-3 gap-8 max-w-[1200px] mx-auto">
      <div class="bg-slate-800 p-8 rounded-3xl border border-slate-700 shadow-lg hover:border-green-500/50 transition-colors">
        <div class="text-4xl mb-4">üì®</div>
        <h3 class="font-bold text-xl text-white mb-2">Bulk SMS / USSD</h3>
        <p class="text-sm text-slate-400">Integrations with <strong>Africa's Talking</strong>, Infobip, or PRSP. Send OTPs, Alerts, and Marketing blasts. Build USSD menus (*123#).</p>
      </div>
      <div class="bg-slate-800 p-8 rounded-3xl border border-slate-700 shadow-lg hover:border-green-500/50 transition-colors">
        <div class="text-4xl mb-4">üìç</div>
        <h3 class="font-bold text-xl text-white mb-2">Google Maps / Mapbox</h3>
        <p class="text-sm text-slate-400">Distance Matrix API for delivery fees. Geocoding for address lookup. Live tracking paths.</p>
      </div>
      <div class="bg-slate-800 p-8 rounded-3xl border border-slate-700 shadow-lg hover:border-green-500/50 transition-colors">
        <div class="text-4xl mb-4">üìß</div>
        <h3 class="font-bold text-xl text-white mb-2">Transactional Email</h3>
        <p class="text-sm text-slate-400">Send PDF invoices and password resets via SendGrid, Mailgun, or Amazon SES with high deliverability.</p>
      </div>
    </div>
  </section>

  <section id="security" class="py-24 px-6 bg-white border-b border-slate-200">
    <div class="max-w-[1000px] mx-auto text-center">
      <h2 class="text-3xl font-bold text-slate-900 mb-6">Security First Architecture</h2>
      <p class="text-slate-600 mb-12 max-w-2xl mx-auto">
        When handling money and data, security is not optional.
      </p>
      
      <div class="grid md:grid-cols-2 gap-4 text-left">
         <div class="flex items-start gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200">
            <span class="text-green-600 text-xl">‚úì</span>
            <div>
               <strong class="text-slate-900">OAuth2 Authentication</strong>
               <p class="text-xs text-slate-500">Secure token-based access for all API endpoints.</p>
            </div>
         </div>
         <div class="flex items-start gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200">
            <span class="text-green-600 text-xl">‚úì</span>
            <div>
               <strong class="text-slate-900">Data Encryption</strong>
               <p class="text-xs text-slate-500">AES-256 encryption for data at rest and TLS 1.3 for data in transit.</p>
            </div>
         </div>
         <div class="flex items-start gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200">
            <span class="text-green-600 text-xl">‚úì</span>
            <div>
               <strong class="text-slate-900">Rate Limiting</strong>
               <p class="text-xs text-slate-500">Prevent DDoS attacks by throttling API requests per IP.</p>
            </div>
         </div>
         <div class="flex items-start gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200">
            <span class="text-green-600 text-xl">‚úì</span>
            <div>
               <strong class="text-slate-900">IP Whitelisting</strong>
               <p class="text-xs text-slate-500">Restrict API access to specific server IP addresses.</p>
            </div>
         </div>
      </div>
    </div>
  </section>

  <section class="py-24 px-6 bg-slate-950 text-center">
    <div class="max-w-3xl mx-auto">
      <h2 class="text-3xl md:text-5xl font-bold text-white mb-8">Need a Custom Integration?</h2>
      <p class="text-xl text-slate-400 mb-12">If it has an API documentation, we can connect to it.</p>
      
      <div class="flex flex-col sm:flex-row justify-center gap-4">
        <a href="/contact" class="bg-green-600 text-white px-10 py-5 rounded-xl font-bold text-lg hover:bg-green-500 transition-colors shadow-lg shadow-green-900/50">
          Talk to an Engineer
        </a>
        <a href="https://wa.me/254715235119" class="text-white border-2 border-white/20 px-10 py-5 rounded-xl font-bold text-lg hover:bg-white/10 transition-colors">
          WhatsApp Sales
        </a>
      </div>
    </div>
  </section>

</MainLayout>